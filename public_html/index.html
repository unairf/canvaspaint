<!DOCTYPE html>	
<html lang="es">
<head>
<title>Los API JavaScript de HTML5</title>
<meta charset=utf-8>
<style type="text/css">
#zona { border: 1px solid black;}
#btnB, #btnD, #btnI, btnP, #btnS{	
	font-family:"Wingdings 3";
	font-size:25px;
}
#btnP{
	font-family:"Wingdings 2";
	font-size:27px;
	position:absolute;
	top:780px;
	left:500px;
}
#btnI{
	position:absolute;
	top:780px;
	left:450px;;
}
#btnS{
	position:absolute;
	top:740px;
	left:500px;;
}
#btnB{
	position:absolute;
	top:820px;
	left:500px;;
}
#btnD{
	position:absolute;
	top:780px;
	left:545px;
}
</style>
<script>
var canvas;
var ctx;
var CANVAS_ANCHURA = 1200;
var CANVAS_ALTURA = 700;
var sliderRojoY = 50;
var sliderAzulY = 90;
var sliderVerdeY = 130;
var slidersAnchura = 200;
var slidersAltura = 5;
var slidersPosicionX = 50;
var rectanguloReglaRojoX = 0;
var rectanguloReglaRojoY = 0;
var rectanguloReglaAzulX = 0;
var rectanguloReglaAzulY = 0;
var rectanguloReglaVerdeX = 0;
var rectanguloReglaVerdeY = 0;
var rectangulosReglaAnchura = 10;
var rectangulosReglaAltura = 30;
var colorRojo = 100;
var colorVerde = 0;
var colorAzul = 0;
var cuadradoPrevisualizarColorX = 300;
var cuadradoPrevisualizarColorY = 30;
var cuadradoPrevisualizarColorAnchura = 50;
var cuadradoPrevisualizarColorAltura = 50;
var lblPosicionX = 980;
var lblPosicionXY = 300;
var lblPosicionYY = 400;
var lblRojoX = 0;
var lblRojoY = 0;
var lblAzulX = 0;
var lblAzulY = 0;
var lblVerdeX = 0;
var lblVerdeY = 0;
var clicRojo = 0;
var clicAzul = 0;
var clicVerde = 0;


function dibujarSlider(x,y,altura,anchura, color) {
   // alert("Entrado en dibujarSlider()");
   ctx.strokeRect(x,y,anchura,altura);
   if(color == "rojo"){
       ctx.strokeRect(x,y - (rectangulosReglaAltura / 2 - 2),rectangulosReglaAnchura,rectangulosReglaAltura);
       rectanguloReglaRojoX = x;
       rectanguloReglaRojoY = y - (rectangulosReglaAltura / 2 - 2);
      // alert(rectanguloReglaRojoY);
   }
   else if(color="verde"){
       ctx.strokeRect(x,y - (rectangulosReglaAltura / 2 - 2),rectangulosReglaAnchura,rectangulosReglaAltura);
       rectanguloReglaVerdeX = x;
       rectanguloReglaVerdeY = y - (rectangulosReglaAltura / 2 - 2);
   }
   else if(color="azul"){
       ctx.strokeRect(x,y - (rectangulosReglaAltura / 2 - 2),rectangulosReglaAnchura,rectangulosReglaAltura);
       rectanguloReglaAzulX = x;
       rectanguloReglaAzulY = y - (rectangulosReglaAltura / 2 - 2);
       
   }
}

function dibujarCuadradoPrevisualizarColor() {
     ctx.fillStyle = "rgb(" + colorRojo + "," + colorVerde + "," + colorAzul + ")";
    ctx.fillRect(cuadradoPrevisualizarColorX,cuadradoPrevisualizarColorY,cuadradoPrevisualizarColorAnchura, cuadradoPrevisualizarColorAltura);
   
   // ctx.fillStyle = "rgb(255, 255, 255)";
}

window.onload = function() {
    alert("Entra en onload");
    canvas = document.getElementById("zona");   
	canvas.width=CANVAS_ANCHURA;
	canvas.height=CANVAS_ALTURA;
	ctx = canvas.getContext("2d"); 
  dibujarSlider(slidersPosicionX,sliderRojoY,slidersAltura,slidersAnchura,"rojo");
  dibujarSlider(slidersPosicionX,sliderAzulY,slidersAltura,slidersAnchura,"verde");
  dibujarSlider(slidersPosicionX,sliderVerdeY,slidersAltura,slidersAnchura,"azul");
  dibujarCuadradoPrevisualizarColor();
  
  
  
  
        canvas.addEventListener('mousemove', function(evt) {
            ctx.clearRect(lblPosicionX - 20,lblPosicionXY - 30,500,500);
        var mousePos = getMousePos(canvas, evt);
        
       // var message = 'Mouse position: ' + mousePos.x + ',' + mousePos.y;
        ctx.font = "30px Arial";
        
        ctx.fillText("Posición X: " + mousePos.x,lblPosicionX,lblPosicionXY);
        ctx.fillText("Posición Y: " + mousePos.y,lblPosicionX,lblPosicionYY);
        ctx.fillText("Rojo: " + colorRojo,lblPosicionX,lblPosicionYY + 100);
        ctx.fillText("Azul: " + colorAzul,lblPosicionX,lblPosicionYY + 200);
        ctx.fillText("Verde: " + colorVerde,lblPosicionX,lblPosicionYY + 300);
      }, false);
      
      
      
      
    canvas.addEventListener("mouseup", function(evt) {
    clicRojo = 0;
    clicAzul = 0;
    clicVerde = 0;
    //cvs.removeEventListener('mousemove',mouseMoveHandler,false);
});

canvas.addEventListener("mousedown", function(evt) {
     var mousePos = getMousePos(canvas, evt);
   // alert("Entrando en mousedown");
    if(parseInt(mousePos.x) >= parseInt(rectanguloReglaRojoX) && parseInt(mousePos.x) < parseInt(rectanguloReglaRojoX) + parseInt(rectangulosReglaAnchura) && parseInt(mousePos.y) > parseInt(rectanguloReglaRojoY) && parseInt(mousePos.y) < parseInt(rectanguloReglaRojoY) + parseInt(rectangulosReglaAltura)) {
        alert("Has hecho clic en el rojo");
        eliminarSlider("rojo");
        
    }
    //cvs.removeEventListener('mousemove',mouseMoveHandler,false);
});

  
};
   
    





function getMousePos(canvas, evt) {
   // alert("Entra en getMousePos");
        var rect = canvas.getBoundingClientRect();
        return {
          x: evt.clientX - rect.left,
          y: evt.clientY - rect.top
        };
      }


function eliminarSlider(color) {
    if(color == "rojo") {
      //  alert("Ha entrado en eliminar");
        ctx.clearRect(slidersPosicionX - 20,sliderRojoY - 30,slidersAnchura + 50,50);
      //  dibujarSlider(slidersPosicionX,sliderRojoY,slidersAltura,slidersAnchura,"");
    }
}






</script>
</head>
<body> 
<br>
	<canvas width="1920" height="1080" id="zona">
		Su navegador no soporta la etiqueta canvas
	</canvas>
<br>
<p id="posX"></p>
<p id="posY"></p>
<br /> 
</body>
</html>